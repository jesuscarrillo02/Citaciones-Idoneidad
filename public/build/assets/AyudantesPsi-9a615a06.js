import{_ as f}from"./AuthenticatedLayout-6eed8f97.js";import{o as d,f as n,b as e,d as y,t as l,i,p as r,a as u,w as p,u as b,j as c,g as x,F as h,l as v,n as w,e as _,k as P,Q as A,Z as I}from"./app-04b634f9.js";import{_ as C}from"./Modal-f8b22e5d.js";import{_ as g}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-2fe1fc7a.js";const k={class:"mx-auto bg-blue-900 shadow-sm sm:rounded-lg sm:px-7 lg:px-7"},M={class:"font-semibold text-xl py-3 text-gray-800 dark:text-gray-200 leading-tight"},D={class:"mb-4 flex items-center"},U={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},S={class:"w-full bg-white border border-black-200 rounded-lg shadow-md"},V={class:"text-gray-600 text-sm font-light"},N={key:0,class:"border-b border-gray-200 hover:bg-gray-100"},L={class:"py-3 px-3 text-left"},$={class:"py-3 px-3 text-left"},T={class:"py-3 px-3 text-left"},E={class:"py-3 px-3 text-left"},j={class:"py-3 px-3 text-left"},F={class:"py-3 px-6 text-left"},B={class:"py-3 px-3 text-left"},H={class:"py-3 px-3 text-center"},R={class:"py-3 px-2 text-center"},O={key:0},z=["onClick"],Q={key:1},Z=["onClick"],q={class:"flex items-center py-4"},G={class:"flex justify-between items-center ml-auto"},J={class:"flex justify-between items-center ml-auto"},K=["disabled"],W={class:"px-3 text-white"},X=["disabled"],Y={class:"modal-container bg-white w-full max-w-md p-6 rounded-lg z-50 shadow-lg relative"},ee=["datos"],te={class:"flex gap-2 mb-4"},se={class:"flex-1"},oe={class:"w-1/4"},ae={class:"w-1/4"},le={class:"mb-4"},ie={class:"flex space-x-4 mb-4"},re={class:"flex-1"},de={class:"flex-1"},ne={class:"mb-4"},ue={class:"mb-4"},pe={name:"Home",props:{message:String,show:Boolean,onClose:Function,datos:{type:Object,default:()=>({})}},data(){return{currentPage:1,totalPages:1,search:"",ayudantesPsi:[],institutionId:"",showModal:!1,datosSeleccionados:{},rut:"",dv:"",id:"",idAyudante:"",nombre:"",apellido_materno:"",apellido_paterno:"",ID_Usuario_encargado:"",horario:"",ubicacion:"",formattedDateTime:"",institutionName:""}},computed:{filterAyudantesPsi(){return this.ayudantesPsi.filter(a=>a.Nombre.toLowerCase().includes(this.search.toLowerCase()))}},mounted(){const{props:a}=A(),s=a.auth.user.id;this.ID_Usuario_encargado=s;const t=new URLSearchParams(window.location.search);this.institutionId=t.get("institutionId"),this.getAyudantesPsi(),this.getInstituciones()},methods:{async getAyudantesPsi(a=1){await axios.get("/api/Ayudantes_psi",{params:{search:this.search,page:a,institutionId:this.institutionId}}).then(s=>{this.ayudantesPsi=s.data,this.currentPage=s.data.current_page,this.totalPages=s.data.last_page}).catch(s=>{console.error("Hubo un error al obtener las instituciones:",s)})},async getInstituciones(){await axios.get("/api/ListaInstitucionesActual",{params:{institutionId:this.institutionId}}).then(a=>{this.institutionName=a.data.Nombre_inst}).catch(a=>{console.error("Hubo un error al obtener las instituciones:",a)})},prevPage(){this.currentPage>1&&this.getAyudantesPsi(this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.getAyudantesPsi(this.currentPage+1)},openModal(a){this.rut=a.RUT_ayu,this.dv=a.DV_ayu,this.idAyudante=a.id,this.nombre=a.Nombre,this.apellido_materno=a.Apellido_M,this.apellido_paterno=a.Apellido_P,this.horario="",this.ubicacion="",this.formattedDateTime="",this.showModal=!0},closeModal(){this.showModal=!1},submitForm(){axios.post("/api/CreateCitacion",{ID_Usuario_encargado:this.ID_Usuario_encargado,ID_institucion_asociada:this.institutionId,ID_Ayudante_citado:this.idAyudante,Fecha_citacion:this.horario,Ubicacion_cita:this.ubicacion,Estado_citacion:1}).then(a=>{console.log("Citacion registrada exitosamente",a.data)}).catch(a=>{console.error("Hubo un error al Enviar lso datos:",a)}),this.closeModal()},formatDateTime(){if(this.form.horario){const a=new Date(this.form.horario);this.form.horario=a.toISOString().split("T")[0]}}}},be=Object.assign(pe,{setup(a){return(s,t)=>(d(),n(h,null,[e("div",k,[e("div",null,[e("h1",M,[t[14]||(t[14]=y(" Ayudantes del instituto ")),e("strong",null,l(s.institutionName),1)])]),e("div",D,[i(e("input",{type:"text",placeholder:"Buscar Ayudante...","onUpdate:modelValue":t[0]||(t[0]=o=>s.search=o),onInput:t[1]||(t[1]=(...o)=>s.getAyudantesPsi&&s.getAyudantesPsi(...o)),class:"p-3 rounded-lg border-2 border-purple-500 bg-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"},null,544),[[r,s.search]]),u(b(c),{href:s.route("Citacion_Psi",{institu_pert:s.institutionId}),class:"ml-auto"},{default:p(()=>t[15]||(t[15]=[e("button",{class:"rounded-md bg-blue-600 px-3 py-3 text-sm hover:bg-blue-500 font-semibold text-white"}," Ver citaciones ",-1)])),_:1},8,["href"])]),e("div",U,[e("table",S,[t[17]||(t[17]=e("thead",null,[e("tr",{class:"bg-gray-300 text-gray-700 uppercase text-sm leading-normal"},[e("th",{class:"py-3 px-3 text-left"},"ID"),e("th",{class:"py-3 px-3 text-left"},"R.U.T"),e("th",{class:"py-3 px-3 text-left"},"Nombre"),e("th",{class:"py-3 px-3 text-left"},"Apellido M."),e("th",{class:"py-3 px-3 text-left"},"Apellido P."),e("th",{class:"py-3 px-6 text-left"},"Email"),e("th",{class:"py-3 px-3 text-left"},"Teléfono"),e("th",{class:"py-3 px-3 text-center"},"Estado"),e("th",{class:"py-3 px-3 text-center"},"Acción")])],-1)),e("tbody",V,[s.ayudantesPsi.data&&s.ayudantesPsi.data.length===0?(d(),n("tr",N,t[16]||(t[16]=[e("td",{colspan:"8",class:"py-3 px-3 text-center text-gray-900"},[e("h1",null,"No se encontró ningún registro")],-1)]))):x("",!0),(d(!0),n(h,null,v(s.ayudantesPsi.data,o=>(d(),n("tr",{key:o.id,class:"border-b border-gray-200 hover:bg-gray-100"},[e("td",L,l(o.id),1),e("td",$,l(o.RUT_ayu)+"-"+l(o.DV_ayu),1),e("td",T,l(o.Nombre),1),e("td",E,l(o.Apellido_M),1),e("td",j,l(o.Apellido_P),1),e("td",F,l(o.Correo_ayu),1),e("td",B,"+"+l(o.Telefono_ayu),1),e("td",H,[e("span",{class:w([o.Estado_ayudante?"bg-green-200 text-green-700":"bg-red-200 text-red-700","py-1 px-3 rounded-full text-xs"])},l(o.Estado_ayudante?"Activo":"Inactivo"),3)]),e("td",R,[o.Estado_ayudante?(d(),n("span",O,[e("button",{onClick:m=>s.openModal(o),class:"rounded-md bg-blue-600 px-3 py-2 text-sm hover:bg-blue-500 font-semibold text-white space-x-3 m-1"},"Citar",8,z)])):(d(),n("span",Q,[e("button",{disabled:!0,onClick:m=>s.openModal(o),class:"rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white space-x-3 m-1"},"Citar",8,Z)]))])]))),128))])])]),e("div",q,[u(b(c),{href:s.route("Inst_edu")},{default:p(()=>t[18]||(t[18]=[e("button",{class:"rounded-md bg-blue-600 px-6 py-3 text-sm hover:bg-blue-500 font-semibold text-white"}," Volver ",-1)])),_:1},8,["href"]),e("div",G,[e("div",J,[e("button",{onClick:t[2]||(t[2]=(...o)=>s.prevPage&&s.prevPage(...o)),disabled:s.currentPage===1,class:"bg-blue-500 text-white px-2 py-2 rounded hover:bg-blue-600"}," Anterior ",8,K),e("span",W," página "+l(s.currentPage)+" de "+l(s.totalPages),1),e("button",{onClick:t[3]||(t[3]=(...o)=>s.nextPage&&s.nextPage(...o)),disabled:s.currentPage===s.totalPages,class:"bg-blue-500 text-white px-2 py-2 rounded hover:bg-blue-600"}," Siguiente ",8,X)])])])]),u(C,{show:s.showModal,onClose:s.closeModal},{default:p(()=>[e("div",Y,[e("div",null,[t[20]||(t[20]=e("h1",{class:"text-lg font-bold mb-4"},"Citacion ",-1)),e("button",{onClick:t[4]||(t[4]=(...o)=>s.closeModal&&s.closeModal(...o)),class:"absolute rounded-lg top-6 right-10 text-blue-900 hover:text-red-700",title:"cerrar formulario"},t[19]||(t[19]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"2",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m0-1.2a8.8 8.8 0 1 0 0-17.6a8.8 8.8 0 0 0 0 17.6m.849-8.8l3.11 3.111l-.848.849L12 12.849l-3.111 3.11l-.849-.848L11.151 12l-3.11-3.111l.848-.849L12 11.151l3.111-3.11l.849.848z"})],-1)]))]),e("form",{onSubmit:t[13]||(t[13]=_((...o)=>s.submitForm&&s.submitForm(...o),["prevent"])),datos:s.datosSeleccionados,class:"text-black"},[e("div",te,[e("div",se,[t[21]||(t[21]=e("label",{class:"block mb-1"},"RUT",-1)),i(e("input",{disabled:!0,"onUpdate:modelValue":t[5]||(t[5]=o=>s.rut=o),type:"number",oninput:"if (this.value.length > 8) this.value = this.value.slice(0, 8)",placeholder:"ej.12345678",class:"w-full bg-gray-300 p-2 border border-gray-300 rounded"},null,512),[[r,s.rut]])]),e("div",oe,[t[22]||(t[22]=e("label",{class:"block mb-1"},"D.V",-1)),i(e("input",{disabled:!0,"onUpdate:modelValue":t[6]||(t[6]=o=>s.dv=o),type:"number",oninput:"if (this.value.length > 1) this.value = this.value.slice(0, 1)",placeholder:"9",class:"w-full bg-gray-300 p-2 border border-gray-300 rounded"},null,512),[[r,s.dv]])]),e("div",ae,[t[23]||(t[23]=e("label",{class:"block mb-1"},"ID",-1)),i(e("input",{disabled:!0,"onUpdate:modelValue":t[7]||(t[7]=o=>s.id=o),type:"number",oninput:"if (this.value.length > 1) this.value = this.value.slice(0, 1)",placeholder:"9",class:"w-full bg-gray-300 p-2 border border-gray-300 rounded"},null,512),[[r,s.id]])])]),e("div",le,[t[24]||(t[24]=e("label",{class:"block text-sm font-bold mb-2"},"Nombre del ayudante",-1)),i(e("input",{disabled:!0,"onUpdate:modelValue":t[8]||(t[8]=o=>s.nombre=o),type:"text",placeholder:"Nombre del ayudante",class:"w-full bg-gray-300 p-2 border border-gray-400 rounded"},null,512),[[r,s.nombre]])]),e("div",ie,[e("div",re,[t[25]||(t[25]=e("label",{class:"block text-sm font-bold mb-2"},"Apellido M",-1)),i(e("input",{disabled:!0,"onUpdate:modelValue":t[9]||(t[9]=o=>s.apellido_materno=o),type:"text",placeholder:"Apellido M",class:"w-full p-2 border border-gray-400 bg-gray-300 rounded"},null,512),[[r,s.apellido_materno]])]),e("div",de,[t[26]||(t[26]=e("label",{class:"block text-sm font-bold mb-2"},"Apellido P",-1)),i(e("input",{disabled:!0,"onUpdate:modelValue":t[10]||(t[10]=o=>s.apellido_paterno=o),type:"text",placeholder:"Apellido P",class:"w-full p-2 border border-gray-400 bg-gray-300 rounded"},null,512),[[r,s.apellido_paterno]])])]),e("div",ne,[t[27]||(t[27]=e("label",{class:"block text-sm font-bold mb-2"},"Horario",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.horario=o),type:"date",class:"w-full p-2 border border-gray-400 rounded"},null,512),[[r,s.horario]])]),e("div",ue,[t[29]||(t[29]=e("label",{class:"block text-sm font-bold mb-2"},"Ubicación",-1)),i(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.ubicacion=o),class:"w-full p-2 border border-gray-400 rounded"},t[28]||(t[28]=[e("option",{disabled:"",value:""},"Seleccione...",-1),e("option",{value:"Servicio de salud Araucania Sur"},"Servicio de salud Araucania Sur",-1),e("option",{value:"Servicio de salud Araucania Norte"},"Servicio de salud Araucania Norte",-1)]),512),[[P,s.ubicacion]])]),t[30]||(t[30]=e("button",{type:"submit",class:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 rounded"}," Agregar ",-1))],40,ee)])]),_:1},8,["show","onClose"])],64))}}),he=g(be,[["__scopeId","data-v-60d32b79"]]);const ce={class:"py-5"},ge={class:"max-w-7xl mx-auto sm:px-6 lg:px-9"},me={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg flex items-center"},fe={class:"w-full bg-white mx-auto p-5"},ye={name:"Home",props:{message:String},data(){return{showModal:!1,phoneInput:"",searchAyudante:""}},computed:{filteredUsers(){return this.users.filter(a=>a.nombre.toLowerCase().includes(this.searchAyudante.toLowerCase())||a.apellidoMaterno.toLowerCase().includes(this.searchAyudante.toLowerCase())||a.apellidoPaterno.toLowerCase().includes(this.searchAyudante.toLowerCase())||a.email.toLowerCase().includes(this.searchAyudante.toLowerCase()))},formattedPhone(){const s=this.phoneInput.replace(/\D/g,"").match(/^(\+?(\d{2}))?(\d{4})(\d{4})$/);return s?`+${s[1]||""}-${s[3]}-${s[4]}`:this.phoneInput}},methods:{alertMessage(){alert("Inertia y Vue están funcionando correctamente!")},openModal(){this.showModal=!0},closeModal(){this.showModal=!1},register(){alert("Registrado correctamente"),this.closeModal()},onInput(a){this.phoneInput=a.target.value}}},xe=Object.assign(ye,{setup(a){return(s,t)=>(d(),n(h,null,[u(b(I),{title:"Dashboard"}),u(f,null,{header:p(()=>t[0]||(t[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Institutos Educativos > Ayudantes a Docentes",-1)])),default:p(()=>[e("div",ce,[e("div",ge,[e("div",me,[e("div",fe,[u(he)])])])])]),_:1})],64))}}),Ie=g(xe,[["__scopeId","data-v-84e2677d"]]);export{Ie as default};
